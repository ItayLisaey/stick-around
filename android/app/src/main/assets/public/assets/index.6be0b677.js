import{u as T,j as i,a as e,B as m,c as b,F as h,f as G,b as oe,I as j,d as ie,e as ce,r as l,G as z,g as D,C as $,h as F,i as H,k as le,S as N,l as de,m as ue,n as he,H as V,M as fe,o as ge,p as ve,q as pe,s as _e,t as me,Z as Ce,v as ye,w as we,x as be,y as Ne,R as x,z as W,A as Se,$ as ke,D as Me,E as U,T as Te,J as $e,K as xe,L as Pe}from"./vendor.ff935ab2.js";const Be=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}};Be();const Ie="_box_zauyu_1",Ee="_bottomNav_zauyu_9",De="_navBtn_zauyu_16",Ae="_selected_zauyu_43";var P={box:Ie,bottomNav:Ee,navBtn:De,selected:Ae};const Re=()=>{const t=T(),n={theaters:"/highlight",search:"/search",donate:"/donate"};function r(o){t.push(o)}return i("div",{className:P.box,children:[e(m,{className:b(P.navBtn,{[P.selected]:t.location.pathname===n.theaters}),onClick:o=>r(n.theaters),children:i("div",{children:[e(h,{icon:G}),e("span",{children:"In Theaters"})]})}),e(m,{className:b(P.navBtn,{[P.selected]:t.location.pathname===n.search}),onClick:o=>r(n.search),children:i("div",{children:[e(h,{icon:oe}),e("span",{children:"Search"})]})})]})},qe="_barContainer_1nxsy_1";var je={barContainer:qe};const Fe=({title:t,search:n,back:r})=>{const o=T();function a(){o.push("/search")}function s(){o.push("/highlight")}return i("div",{className:je.barContainer,children:[r?e(j,{onClick:s,children:e(h,{icon:ie})}):e("span",{children:t}),n&&e(j,{onClick:a,children:e(ce,{color:"primary"})})]})},B={default:"https://api.themoviedb.org/3/",MOVIES:"https://api.themoviedb.org/3/movie/",IMAGES:"https://image.tmdb.org/t/p/w200/",HDIMAGES:"https://image.tmdb.org/t/p/w500/",PLAYING:"now_playing",AFTER_STINGER:179430,DURING_STINGER:179431};function Ve(t){switch(t){case"movie":return B.MOVIES;case"image":return B.IMAGES;case"image-hd":return B.HDIMAGES;default:return B.default}}function A(t,n,r){const o="382199f5e49d336dfba83276194599a8",a=Ve(r);let s="";return t&&(s=`&${t.join("&")}`),`${a}${n}?api_key=${o}${s}`}function Y(t){return A([],t,"image-hd")}const Oe="_card_qehcj_1",Le="_placeholderCard_qehcj_13",Ge="_skeleton_qehcj_1";var ze={card:Oe,placeholderCard:Le,skeleton:Ge};const R=({movie:t,dummy:n})=>{const[r,o]=l.exports.useState(!0),a=T();function s(){n||a.push(`/movies/${t.id}`)}return e("div",{className:ze.card,onClick:s,children:e(z,{in:r,children:e("img",{onClick:s,src:Y(t.posterPath),alt:`${t.title} poster image`})})})};function q(t){return new Date(Date.parse(t))}async function He(t){const n=r=>A(["language=en-US",`page=${r}`],B.PLAYING,"movie");try{return(await fetch(n(t)).then(a=>a.json()).catch(a=>{throw Error("Error fetching movies")})).results.map(a=>{var s,c;return{id:a.id,title:a.title,releaseDate:q(a.release_date),overview:(s=a.overview)!=null?s:"",posterPath:(c=a.poster_path)!=null?c:""}})}catch(r){console.error(r)}}function We(t){const[n,r]=l.exports.useState(!0),[o,a]=l.exports.useState(!1),[s,c]=l.exports.useState([]),[g,u]=l.exports.useState(!1);return l.exports.useEffect(()=>{r(!0),He(t).then(d=>{c(f=>f.concat(d)),u(d.length>0),r(!1)}).catch(d=>a(!0))},[t]),{loading:n,movies:s,hasMore:g,error:o}}const Ue="_cardsContainer_1s7ef_1",Ye="_nowPlayingContainer_1s7ef_9",Je="_highlightContainer_1s7ef_19",Ke="_progressContainer_1s7ef_26",Ze="_loadingCard_1s7ef_35",Xe="_loadingBg_1s7ef_1",Qe="_errorCard_1s7ef_53";var S={cardsContainer:Ue,nowPlayingContainer:Ye,highlightContainer:Je,progressContainer:Ke,loadingCard:Ze,loadingBg:Xe,errorCard:Qe};const et=()=>{const[t,n]=l.exports.useState(1),{movies:r,hasMore:o,loading:a,error:s}=We(t),c=l.exports.useRef(null),g=l.exports.useCallback(u=>{a||(c.current&&c.current.disconnect(),c.current=new IntersectionObserver(d=>{d[0].isIntersecting&&o&&n(f=>f+1)}),u&&c.current.observe(u))},[a,o]);return e("div",{className:S.nowPlayingContainer,children:r.length>0?i("div",{className:S.highlightContainer,children:[e(Fe,{title:"In Theaters",search:!0}),i("div",{className:S.cardsContainer,children:[r.map((u,d)=>r.length===d+1?e("div",{ref:g,children:e(R,{movie:u})},d):e(R,{movie:u},d)),!s&&e(D,{in:a,children:e("div",{className:S.loadingCard,children:e($,{})})}),e(D,{in:s,children:e("div",{className:S.errorCard,children:e(h,{icon:F})})})]})]}):e("div",{className:S.progressContainer,children:e($,{})})})};async function tt(t){const n=A(["language=en",`query=${t}`],"search/movie"),{results:r}=await fetch(n).then(a=>a.json());return r.map(a=>{var s,c;return{id:a.id,title:a.title,releaseDate:q(a.release_date),overview:(s=a.overview)!=null?s:"",posterPath:(c=a.backdrop_path)!=null?c:""}})}const nt="_barContainer_1buq4_1",rt="_overlay_1buq4_29";var J={barContainer:nt,overlay:rt};const at=({movie:t})=>{const n=T();function r(){n.push(`/movies/${t.id}`)}return i("div",{className:J.barContainer,style:{backgroundImage:`url(${Y(t.posterPath)})`},onClick:r,children:[e("span",{children:t.title}),e("span",{children:t.releaseDate.getFullYear()}),e("div",{className:J.overlay})]})},st="_searchContainer_1o4lq_1",ot="_searchField_1o4lq_13",it="_resultsContainer_1o4lq_45",ct="_movieBarContainer_1o4lq_56",lt="_noResultsContainer_1o4lq_60",dt="_searchStartScreen_1o4lq_76";var k={searchContainer:st,searchField:ot,resultsContainer:it,movieBarContainer:ct,noResultsContainer:lt,searchStartScreen:dt};const ut=()=>{const[t,n]=l.exports.useState(""),[r,o]=l.exports.useState([]);l.exports.useEffect(()=>{async function s(){o(await tt(t))}t!==""&&s()},[t]);function a(){return t===""?i("div",{className:k.searchStartScreen,children:[e(h,{icon:G}),e(h,{icon:H})]}):i("div",{className:k.noResultsContainer,children:[e(h,{icon:le}),e("span",{children:"No results found"})]})}return i("div",{className:k.searchContainer,children:[e("div",{className:k.searchField,children:e("input",{type:"text",placeholder:"Search...",autoFocus:!0,value:t,onChange:s=>n(s.currentTarget.value)})}),r.length>0?e("div",{className:k.resultsContainer,children:r.map((s,c)=>e("div",{className:k.movieBarContainer,children:e(at,{movie:s})},c))}):a()]})},K={during:0,after:0,trust:4,total:0},I={Certified:"Certified Results",Users:"These results rely on user votes and therefore may not be accurate",TMDB:"These results rely on the TMDB Database and have not yet been confirmed by our users","404":"No information"};async function Z(t,n){const r=await N.get({key:`${t}`});if(r.value){const o=r.value&&JSON.parse(r.value);o[n]=!0,await N.set({key:`${t}`,value:JSON.stringify(o,null,2)})}else{const o=n==="after"?{after:!0,during:!1}:{after:!1,during:!0};await N.set({key:`${t}`,value:JSON.stringify(o,null,2)})}}async function ht(t){const{value:n}=await N.get({key:`${t}`});return n?JSON.parse(n):null}async function ft(){return!!(await fetch(`${O}/authenticate`,{credentials:"include",method:"POST"}).then(n=>n.json())).success}const O="https://stick-around-backend-ie7sxtuaoa-uc.a.run.app/api";async function gt(t){try{const n=await fetch(`${O}/movies/${t}`).then(r=>r.json()).catch(r=>r);return n.success?n.data:K}catch(n){return K}}async function X(t,n,r){const o=`${O}/vote`;return!!(await fetch(`${o}/${n}/${t}/?vote=${r}`,{credentials:"include",method:"POST"}).then(s=>s.json())).success}async function vt(t,n,r){const o=await X(t,n,r);return o?(await Z(t,n),console.log("trying to register vote"),o):ft()&&await X(t,n,r)?(await Z(t,n),!0):!1}async function pt(t){var a,s;const n=A([],`${t}`,"movie"),r=await fetch(n).then(c=>c.json());return{id:r.id,title:r.title,releaseDate:q(r.release_date),overview:(a=r.overview)!=null?a:"",posterPath:(s=r.poster_path)!=null?s:""}}function _t(t){if(t)return t.after>0||t.during>0?1:t.after<0&&t.during<0?-1:0}function mt(t){switch(t){case 1:return"YES";case-1:return"NO";case 0:return"MAYBE";default:return"MAYBE"}}const Ct="_waitingContainer_c5fnl_1",yt="_worth_c5fnl_32",wt="_notWorth_c5fnl_36",bt="_maybeWorth_c5fnl_40",Nt="_creditsRow_c5fnl_44",St="_creditsContainer_c5fnl_51",kt="_votes_c5fnl_66",Mt="_moreInfo_c5fnl_76",Tt="_waitingProgressContainer_c5fnl_89";var v={waitingContainer:Ct,worth:yt,notWorth:wt,maybeWorth:bt,creditsRow:Nt,creditsContainer:St,votes:kt,moreInfo:Mt,waitingProgressContainer:Tt};const M=de({palette:{primary:{main:"#6E85B2",dark:"#261C2C",light:"#6E85B2"},secondary:{main:"#5C527F"},success:{main:"#4AA96C"},error:{main:"#FF5C58"},background:{default:"#261C2C"}}}),$t="_markContainer_1fpnq_1",xt="_iconContainer_1fpnq_5",Pt="_voteContainer_1fpnq_12",Bt="_long_1fpnq_31",It="_maybe_1fpnq_37";var p={markContainer:$t,iconContainer:xt,voteContainer:Pt,long:Bt,maybe:It};const Q=({count:t,trust:n})=>t>0?i("div",{className:p.markContainer,children:[e("div",{className:p.iconContainer,children:e(h,{icon:ue,color:M.palette.success.main})}),e(ee,{count:t,trust:n})]}):t===0||n===4?e("div",{className:p.markContainer,children:e("div",{className:b(p.iconContainer,p.maybe),children:e(h,{icon:H,color:M.palette.primary.light})})}):i("div",{className:p.markContainer,children:[e("div",{className:p.iconContainer,children:e(h,{icon:he,color:M.palette.error.main})}),e(ee,{count:t,trust:n})]}),ee=({count:t,trust:n})=>n===2?e("div",{className:b(p.voteContainer,{[p.long]:t.toString().length>1}),children:e("span",{children:t})}):null,Et="_voteContainer_63z64_1",Dt="_votedContainer_63z64_22";var te={voteContainer:Et,votedContainer:Dt};const ne=({onClick:t,creditType:n,hasVoted:r})=>r?i(m,{className:te.votedContainer,disabled:!0,children:[e(V,{}),e("span",{children:"VOTED"})]}):i(m,{className:b(te.voteContainer,{voted:r}),onClick:o=>t(n),children:[e(V,{}),e("span",{children:"VOTE"})]}),At="_modalBox_n78oi_1",Rt="_votingContainer_n78oi_35";var re={modalBox:At,votingContainer:Rt};const qt=({open:t,onClose:n,creditType:r,setOpen:o,movie:a,votingStatus:s})=>{const[c,g]=l.exports.useState(!1),u=()=>r==="after"?"Is there an after credits scene?":"Is there a scene during the credits?";async function d(f){s[r]||(g(!0),await vt(a.id,r,f)||console.error("Voting error"),o(!1))}return e(fe,{open:t,onClose:n,children:i("div",{className:re.modalBox,children:[e("span",{children:u()}),i("div",{className:re.votingContainer,children:[e(m,{variant:"contained",color:"success",onClick:f=>d(!0),disableElevation:!0,children:e(h,{icon:ge,color:M.palette.primary.dark})}),e(m,{variant:"contained",color:"error",onClick:f=>d(!1),disableElevation:!0,children:e(h,{icon:ve,color:M.palette.primary.dark})})]})]})})},jt="_root_18pij_1",Ft="_iconContainer_18pij_11";var ae={root:jt,iconContainer:Ft};const Vt=({trust:t})=>{switch(t){case 1:return e(E,{icon:me,message:I.Certified});case 2:return e(E,{icon:_e,message:I.Users});case 3:return e(E,{icon:pe,message:I.TMDB});case 4:return e(E,{icon:F,message:I[404]});default:return e(E,{icon:F,message:I[404]})}},E=({icon:t,message:n})=>i("div",{className:ae.root,children:[e("div",{className:ae.iconContainer,children:e(h,{icon:t})}),e("p",{children:n})]}),Ot=({movie:t,credits:n,open:r,setOpen:o})=>{const[a,s]=l.exports.useState("during"),[c,g]=l.exports.useState(0),[u,d]=l.exports.useState({after:!0,during:!0}),f=()=>o(!1);function y(w){s(w),o(!0)}return l.exports.useEffect(()=>{async function w(){const L=await ht(t.id);d(L||{after:!1,during:!1})}w()},[r,t]),l.exports.useEffect(()=>{var w;g((w=_t(n))!=null?w:0)},[n,u]),n?i("div",{className:b(v.waitingContainer,{[v.worth]:c===1},{[v.notWorth]:c===-1},{[v.maybeWorth]:c===0}),children:[e("h1",{children:"Should you wait?"}),e("h2",{children:mt(c)}),i("div",{className:v.creditsRow,children:[i("div",{className:v.creditsContainer,children:[e("span",{children:"During the credits?"}),e(Q,{count:n.during,trust:n.trust})]}),e(ne,{onClick:y,creditType:"during",hasVoted:u.during})]}),i("div",{className:v.creditsRow,children:[i("div",{className:v.creditsContainer,children:[e("span",{children:"After the credits?"}),e(Q,{count:n.after,trust:n.trust})]}),e(ne,{onClick:y,creditType:"after",hasVoted:u.after})]}),e(Vt,{trust:n.trust}),e(qt,{open:r,onClose:f,creditType:a,setOpen:o,movie:t,votingStatus:u})]}):e("div",{className:v.waitingProgressContainer,children:e($,{size:60})})},Lt="_pageContainer_1hso4_1",Gt="_aboutContainer_1hso4_27",zt="_waitingContainer_1hso4_34",Ht="_aboutCard_1hso4_38",Wt="_aboutDetails_1hso4_44",Ut="_progressPageContainer_1hso4_70",Yt="_waitingProgressContainer_1hso4_78";var C={pageContainer:Lt,aboutContainer:Gt,waitingContainer:zt,aboutCard:Ht,aboutDetails:Wt,progressPageContainer:Ut,waitingProgressContainer:Yt};const Jt=({id:t})=>{const[n,r]=l.exports.useState(),[o,a]=l.exports.useState(),[s,c]=l.exports.useState(!1),[g,u]=l.exports.useState(!1);return l.exports.useEffect(()=>{const d=parseInt(t);async function f(){r(await pt(d))}f()},[t]),l.exports.useEffect(()=>{const d=parseInt(t);async function f(){const y=await gt(d);y&&a(y)}n&&f()},[s,n,t]),l.exports.useEffect(()=>{u(!!o)},[o]),n?e("div",{className:C.pageContainer,children:i("main",{children:[i("div",{className:C.aboutContainer,children:[e("div",{className:C.aboutCard,children:e(R,{movie:n})}),i("div",{className:C.aboutDetails,children:[e("h1",{children:n.title}),e("h2",{children:n.releaseDate.getFullYear()}),e("p",{children:n.overview})]})]}),g?e(Ce,{in:g,children:e("div",{className:C.waitingContainer,children:e(Ot,{credits:o,movie:n,open:s,setOpen:c})})}):e("div",{className:C.waitingProgressContainer,children:e($,{size:60})})]})}):e("div",{className:C.progressPageContainer,children:e($,{})})};async function Kt(){await N.set({key:"hasBeen",value:"true"})}async function Zt(){return!(await N.get({key:"hasBeen"})).value}const Xt={id:566525,title:"Shang-Chi and the Legend of the Ten Rings",releaseDate:q("2021-09-01"),overview:"Shang-Chi must confront the past he thought he left behind when he is drawn into the web of the mysterious Ten Rings organization.",posterPath:"/1BIoJGKbXjdFDAqUEiA2VHqkK1Z.jpg"},Qt="_root_18408_1",en="_introContainer_18408_19",tn="_welcomeMessage_18408_26",nn="_instruction_18408_46",rn="_moviePress_18408_59",an="_vote_18408_83",sn="_btnContainer_18408_97",on="_close_18408_107";var _={root:Qt,introContainer:en,welcomeMessage:tn,instruction:nn,moviePress:rn,vote:an,btnContainer:sn,close:on};const cn=({exit:t})=>{function n(){Kt(),t(!1)}return i("div",{className:_.root,children:[i("div",{className:_.introContainer,children:[i("div",{className:_.welcomeMessage,children:[e("p",{children:"Hey, thanks for downloading \u201DStick Around\u201D"}),e("p",{children:"This is the main page, where you can see the movies now playing at theaters."})]}),i("div",{className:_.instruction,children:[i("div",{className:_.moviePress,children:[e(R,{movie:Xt,dummy:!0}),e(h,{icon:ye})]}),e("p",{children:"After pressing on a title, you will be forwarded to the title\u2019s movie page, where you can see whether or not the movie has a post credits scene."}),i("div",{className:_.vote,children:[e(V,{}),e("span",{children:"VOTED"})]}),e("p",{children:"Please consider voting on the movie page to help increase the app\u2019s accuracy :)"})]})]}),e("div",{className:_.btnContainer,children:e(m,{variant:"contained",disableElevation:!0,onClick:n,children:"Continue"})}),e("div",{className:_.close,children:e(j,{onClick:n,children:e(h,{icon:we})})})]})},ln="_container_1gjzy_1",dn="_intro_1gjzy_19";var un={container:ln,intro:dn};const hn=()=>{T(),be();const[t,n]=l.exports.useState(!1);return l.exports.useEffect(()=>{async function r(){n(await Zt())}r()}),i("div",{className:un.container,children:[i(Ne,{children:[e(x,{path:"/movies/:id",children:({match:r})=>{var o;return e(z,{in:r!==null,children:e("main",{children:e(Jt,{id:(o=r==null?void 0:r.params.id)!=null?o:"0"})})})}}),e(x,{path:"/highlight",exact:!0,children:({match:r})=>e(D,{in:r!==null,children:e("main",{children:e(et,{})})})}),e(x,{path:"/search",exact:!0,children:({match:r})=>e(D,{in:r!==null,children:e("main",{children:e(ut,{})})})}),e(x,{path:"/",children:e(W,{to:"/highlight"})}),e(x,{path:"*",children:e(W,{to:"/highlight"})})]}),e("footer",{children:e(Re,{})}),t&&e(cn,{exit:n})]})},fn="AIzaSyDY6TM6u-X6lJcMNnbo5cvZ29Wp7FRnoHA",gn={apiKey:fn,authDomain:"stick-around-01.firebaseapp.com",projectId:"stick-around-01",storageBucket:"stick-around-01.appspot.com",messagingSenderId:"363848154346",appId:"1:363848154346:web:9c86b385d000e76f8c6b93",measurementId:"G-ZPY4HGZV7D"},se=Se(gn);ke(se);Me(se);function vn(){return U.addListener("backButton",({canGoBack:t})=>{t?window.history.back():U.exitApp()}),e("div",{className:"App",children:e(Te,{theme:M,children:e($e,{children:e(hn,{})})})})}xe.render(e(Pe.StrictMode,{children:e(vn,{})}),document.getElementById("root"));

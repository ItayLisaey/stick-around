import{u as M,j as i,a as e,B as _,c as C,F as u,f as G,b as oe,d as ie,I as V,e as ce,g as le,r as l,G as H,h as P,C as B,i as j,k as W,l as de,S,m as he,n as ue,o as fe,H as z,M as ge,p as ve,q as pe,s as _e,t as me,v as Ce,Z as ye,w as we,x as be,y as Ne,z as Se,R as k,A as U,D as ke,$ as xe,E as Te,J as Y,T as $e,K as Me,L as Pe,N as Be}from"./vendor.8d7f003d.js";const Ie=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}};Ie();const Ee="_box_17g0y_1",De="_bottomNav_17g0y_9",Ae="_navBtn_17g0y_16",Re="_selected_17g0y_43";var y={box:Ee,bottomNav:De,navBtn:Ae,selected:Re};const qe=()=>{const t=M(),n={theaters:"/highlight",search:"/search",donate:"/donate"};function r(o){t.push(o)}return i("div",{className:y.box,children:[e(_,{className:C(y.navBtn,{[y.selected]:t.location.pathname===n.theaters}),onClick:o=>r(n.theaters),children:i("div",{children:[e(u,{icon:G}),e("span",{children:"In Theaters"})]})}),e(_,{className:C(y.navBtn,{[y.selected]:t.location.pathname===n.search}),onClick:o=>r(n.search),children:i("div",{children:[e(u,{icon:oe}),e("span",{children:"Search"})]})}),e(_,{className:C(y.navBtn,{[y.selected]:t.location.pathname===n.donate}),onClick:o=>r(n.donate),children:i("div",{children:[e(u,{icon:ie}),e("span",{children:"Support"})]})})]})},Fe="_barContainer_1nxsy_1";var Ve={barContainer:Fe};const je=({title:t,search:n,back:r})=>{const o=M();function a(){o.push("/search")}function s(){o.push("/highlight")}return i("div",{className:Ve.barContainer,children:[r?e(V,{onClick:s,children:e(u,{icon:ce})}):e("span",{children:t}),n&&e(V,{onClick:a,children:e(le,{color:"primary"})})]})},I={default:"https://api.themoviedb.org/3/",MOVIES:"https://api.themoviedb.org/3/movie/",IMAGES:"https://image.tmdb.org/t/p/w200/",HDIMAGES:"https://image.tmdb.org/t/p/w500/",PLAYING:"now_playing",AFTER_STINGER:179430,DURING_STINGER:179431};function ze(t){switch(t){case"movie":return I.MOVIES;case"image":return I.IMAGES;case"image-hd":return I.HDIMAGES;default:return I.default}}function D(t,n,r){const o="382199f5e49d336dfba83276194599a8",a=ze(r);let s="";return t&&(s=`&${t.join("&")}`),`${a}${n}?api_key=${o}${s}`}function J(t){return D([],t,"image-hd")}const Oe="_card_qehcj_1",Le="_placeholderCard_qehcj_13",Ge="_skeleton_qehcj_1";var He={card:Oe,placeholderCard:Le,skeleton:Ge};const A=({movie:t,dummy:n})=>{const[r,o]=l.exports.useState(!0),a=M();function s(){n||a.push(`/movies/${t.id}`)}return e("div",{className:He.card,onClick:s,children:e(H,{in:r,children:e("img",{onClick:s,src:J(t.posterPath),alt:`${t.title} poster image`})})})};function R(t){return new Date(Date.parse(t))}async function We(t){const n=r=>D(["language=en-US",`page=${r}`],I.PLAYING,"movie");try{return(await fetch(n(t)).then(a=>a.json()).catch(a=>{throw Error("Error fetching movies")})).results.map(a=>{var s,c;return{id:a.id,title:a.title,releaseDate:R(a.release_date),overview:(s=a.overview)!=null?s:"",posterPath:(c=a.poster_path)!=null?c:""}})}catch(r){console.error(r)}}function Ue(t){const[n,r]=l.exports.useState(!0),[o,a]=l.exports.useState(!1),[s,c]=l.exports.useState([]),[g,h]=l.exports.useState(!1);return l.exports.useEffect(()=>{r(!0),We(t).then(d=>{c(f=>f.concat(d)),h(d.length>0),r(!1)}).catch(d=>a(!0))},[t]),{loading:n,movies:s,hasMore:g,error:o}}const Ye="_cardsContainer_1s7ef_1",Je="_nowPlayingContainer_1s7ef_9",Ke="_highlightContainer_1s7ef_19",Ze="_progressContainer_1s7ef_26",Xe="_loadingCard_1s7ef_35",Qe="_loadingBg_1s7ef_1",et="_errorCard_1s7ef_53";var x={cardsContainer:Ye,nowPlayingContainer:Je,highlightContainer:Ke,progressContainer:Ze,loadingCard:Xe,loadingBg:Qe,errorCard:et};const tt=()=>{const[t,n]=l.exports.useState(1),{movies:r,hasMore:o,loading:a,error:s}=Ue(t),c=l.exports.useRef(null),g=l.exports.useCallback(h=>{a||(c.current&&c.current.disconnect(),c.current=new IntersectionObserver(d=>{d[0].isIntersecting&&o&&n(f=>f+1)}),h&&c.current.observe(h))},[a,o]);return e("div",{className:x.nowPlayingContainer,children:r.length>0?i("div",{className:x.highlightContainer,children:[e(je,{title:"In Theaters",search:!0}),i("div",{className:x.cardsContainer,children:[r.map((h,d)=>r.length===d+1?e("div",{ref:g,children:e(A,{movie:h})},d):e(A,{movie:h},d)),!s&&e(P,{in:a,children:e("div",{className:x.loadingCard,children:e(B,{})})}),e(P,{in:s,children:e("div",{className:x.errorCard,children:e(u,{icon:j})})})]})]}):e("div",{className:x.progressContainer,children:e(B,{})})})};async function nt(t){const n=D(["language=en",`query=${t}`],"search/movie"),{results:r}=await fetch(n).then(a=>a.json());return r.map(a=>{var s,c;return{id:a.id,title:a.title,releaseDate:R(a.release_date),overview:(s=a.overview)!=null?s:"",posterPath:(c=a.backdrop_path)!=null?c:""}})}const rt="_barContainer_1buq4_1",at="_overlay_1buq4_29";var K={barContainer:rt,overlay:at};const st=({movie:t})=>{const n=M();function r(){n.push(`/movies/${t.id}`)}return i("div",{className:K.barContainer,style:{backgroundImage:`url(${J(t.posterPath)})`},onClick:r,children:[e("span",{children:t.title}),e("span",{children:t.releaseDate.getFullYear()}),e("div",{className:K.overlay})]})},ot="_searchContainer_1o4lq_1",it="_searchField_1o4lq_13",ct="_resultsContainer_1o4lq_45",lt="_movieBarContainer_1o4lq_56",dt="_noResultsContainer_1o4lq_60",ht="_searchStartScreen_1o4lq_76";var T={searchContainer:ot,searchField:it,resultsContainer:ct,movieBarContainer:lt,noResultsContainer:dt,searchStartScreen:ht};const ut=()=>{const[t,n]=l.exports.useState(""),[r,o]=l.exports.useState([]);l.exports.useEffect(()=>{async function s(){o(await nt(t))}t!==""&&s()},[t]);function a(){return t===""?i("div",{className:T.searchStartScreen,children:[e(u,{icon:G}),e(u,{icon:W})]}):i("div",{className:T.noResultsContainer,children:[e(u,{icon:de}),e("span",{children:"No results found"})]})}return i("div",{className:T.searchContainer,children:[e("div",{className:T.searchField,children:e("input",{type:"text",placeholder:"Search...",autoFocus:!0,value:t,onChange:s=>n(s.currentTarget.value)})}),r.length>0?e("div",{className:T.resultsContainer,children:r.map((s,c)=>e("div",{className:T.movieBarContainer,children:e(st,{movie:s})},c))}):a()]})},Z={during:0,after:0,trust:4,total:0},q={Certified:"Certified Results",Users:"These results rely on user votes and therefore may not be accurate",TMDB:"These results rely on the TMDB Database and have not yet been confirmed by our users","404":"No information"};async function X(t,n){const r=await S.get({key:`${t}`});if(r.value){const o=r.value&&JSON.parse(r.value);o[n]=!0,await S.set({key:`${t}`,value:JSON.stringify(o,null,2)})}else{const o=n==="after"?{after:!0,during:!1}:{after:!1,during:!0};await S.set({key:`${t}`,value:JSON.stringify(o,null,2)})}}async function ft(t){const{value:n}=await S.get({key:`${t}`});return n?JSON.parse(n):null}async function gt(){return!!(await fetch(`${O}/authenticate`,{credentials:"include",method:"POST"}).then(n=>n.json())).success}const O="https://stick-around-backend-ie7sxtuaoa-uc.a.run.app/api";async function vt(t){try{const n=await fetch(`${O}/movies/${t}`).then(r=>r.json()).catch(r=>r);return n.success?n.data:Z}catch(n){return Z}}async function Q(t,n,r){const o=`${O}/vote`;return!!(await fetch(`${o}/${n}/${t}/?vote=${r}`,{credentials:"include",method:"POST"}).then(s=>s.json())).success}async function pt(t,n,r){const o=await Q(t,n,r);return o?(await X(t,n),console.log("trying to register vote"),o):gt()&&await Q(t,n,r)?(await X(t,n),!0):!1}async function _t(t){var a,s;const n=D([],`${t}`,"movie"),r=await fetch(n).then(c=>c.json());return{id:r.id,title:r.title,releaseDate:R(r.release_date),overview:(a=r.overview)!=null?a:"",posterPath:(s=r.poster_path)!=null?s:""}}function mt(t){if(t)return t.after>0||t.during>0?1:t.after<0&&t.during<0?-1:0}function Ct(t){switch(t){case 1:return"YES";case-1:return"NO";case 0:return"MAYBE";default:return"MAYBE"}}const yt="_waitingContainer_krzf9_1",wt="_worth_krzf9_34",bt="_notWorth_krzf9_38",Nt="_maybeWorth_krzf9_42",St="_creditsRow_krzf9_46",kt="_creditsContainer_krzf9_53",xt="_votes_krzf9_71",Tt="_moreInfo_krzf9_80",$t="_waitingProgressContainer_krzf9_93";var v={waitingContainer:yt,worth:wt,notWorth:bt,maybeWorth:Nt,creditsRow:St,creditsContainer:kt,votes:xt,moreInfo:Tt,waitingProgressContainer:$t};const $=he({palette:{primary:{main:"#6E85B2",dark:"#261C2C",light:"#6E85B2"},secondary:{main:"#5C527F"},success:{main:"#4AA96C"},error:{main:"#FF5C58"},background:{default:"#261C2C"}}}),Mt="_markContainer_1fpnq_1",Pt="_iconContainer_1fpnq_5",Bt="_voteContainer_1fpnq_12",It="_long_1fpnq_31",Et="_maybe_1fpnq_37";var p={markContainer:Mt,iconContainer:Pt,voteContainer:Bt,long:It,maybe:Et};const ee=({count:t,trust:n})=>t>0?i("div",{className:p.markContainer,children:[e("div",{className:p.iconContainer,children:e(u,{icon:ue,color:$.palette.success.main})}),e(te,{count:t,trust:n})]}):t===0||n===4?e("div",{className:p.markContainer,children:e("div",{className:C(p.iconContainer,p.maybe),children:e(u,{icon:W,color:$.palette.primary.light})})}):i("div",{className:p.markContainer,children:[e("div",{className:p.iconContainer,children:e(u,{icon:fe,color:$.palette.error.main})}),e(te,{count:t,trust:n})]}),te=({count:t,trust:n})=>n===2?e("div",{className:C(p.voteContainer,{[p.long]:t.toString().length>1}),children:e("span",{children:t})}):null,Dt="_voteContainer_hijyz_1",At="_votedContainer_hijyz_28";var ne={voteContainer:Dt,votedContainer:At};const re=({onClick:t,creditType:n,hasVoted:r})=>r?i(_,{className:ne.votedContainer,disabled:!0,children:[e(z,{}),e("span",{children:"VOTED"})]}):i(_,{className:C(ne.voteContainer,{voted:r}),onClick:o=>t(n),children:[e(z,{}),e("span",{children:"VOTE"})]}),Rt="_modalBox_n78oi_1",qt="_votingContainer_n78oi_35";var ae={modalBox:Rt,votingContainer:qt};const Ft=({open:t,onClose:n,creditType:r,setOpen:o,movie:a,votingStatus:s})=>{const[c,g]=l.exports.useState(!1),h=()=>r==="after"?"Is there an after credits scene?":"Is there a scene during the credits?";async function d(f){s[r]||(g(!0),await pt(a.id,r,f)||console.error("Voting error"),o(!1))}return e(ge,{open:t,onClose:n,children:i("div",{className:ae.modalBox,children:[e("span",{children:h()}),i("div",{className:ae.votingContainer,children:[e(_,{variant:"contained",color:"success",onClick:f=>d(!0),disableElevation:!0,children:e(u,{icon:ve,color:$.palette.primary.dark})}),e(_,{variant:"contained",color:"error",onClick:f=>d(!1),disableElevation:!0,children:e(u,{icon:pe,color:$.palette.primary.dark})})]})]})})},Vt="_root_1mufk_1",jt="_iconContainer_1mufk_12",zt="_textContainer_1mufk_27";var E={root:Vt,iconContainer:jt,textContainer:zt};const Ot=({trust:t})=>{switch(t){case 1:return e(Lt,{icon:Ce});case 2:return e(F,{icon:me,message:q.Users});case 3:return e(F,{icon:_e,message:q.TMDB});case 4:return e(F,{icon:j,message:q[404]});default:return e(F,{icon:j,message:q[404]})}},F=({icon:t,message:n})=>i("div",{className:E.root,children:[e("div",{className:E.iconContainer,children:e(u,{icon:t})}),e("p",{children:n})]}),Lt=({icon:t})=>i("div",{className:E.root,children:[e("div",{className:E.iconContainer,children:e(u,{icon:t})}),i("div",{className:E.textContainer,children:[e("h5",{children:"Certified"}),e("p",{children:"These results have been confirmed by our moderators"})]})]}),Gt=({movie:t,credits:n,open:r,setOpen:o})=>{const[a,s]=l.exports.useState("during"),[c,g]=l.exports.useState(0),[h,d]=l.exports.useState({after:!0,during:!0}),f=()=>o(!1);function b(N){s(N),o(!0)}return l.exports.useEffect(()=>{async function N(){const L=await ft(t.id);d(L||{after:!1,during:!1})}N()},[r,t]),l.exports.useEffect(()=>{var N;g((N=mt(n))!=null?N:0)},[n,h]),n?i("div",{className:C(v.waitingContainer,{[v.worth]:c===1},{[v.notWorth]:c===-1},{[v.maybeWorth]:c===0}),children:[e("h1",{children:"Should you wait?"}),e("h2",{children:Ct(c)}),e("div",{className:v.creditsRow,children:i("div",{className:v.creditsContainer,children:[e("span",{children:"During the credits?"}),e(ee,{count:n.during,trust:n.trust}),e(re,{onClick:b,creditType:"during",hasVoted:h.during})]})}),e("div",{className:v.creditsRow,children:i("div",{className:v.creditsContainer,children:[e("span",{children:"After the credits?"}),e(ee,{count:n.after,trust:n.trust}),e(re,{onClick:b,creditType:"after",hasVoted:h.after})]})}),e(Ot,{trust:n.trust}),e(Ft,{open:r,onClose:f,creditType:a,setOpen:o,movie:t,votingStatus:h})]}):e("div",{className:v.waitingProgressContainer,children:e(B,{size:60})})},Ht="_pageContainer_1hso4_1",Wt="_aboutContainer_1hso4_27",Ut="_waitingContainer_1hso4_34",Yt="_aboutCard_1hso4_38",Jt="_aboutDetails_1hso4_44",Kt="_progressPageContainer_1hso4_70",Zt="_waitingProgressContainer_1hso4_78";var w={pageContainer:Ht,aboutContainer:Wt,waitingContainer:Ut,aboutCard:Yt,aboutDetails:Jt,progressPageContainer:Kt,waitingProgressContainer:Zt};const Xt=({id:t})=>{const[n,r]=l.exports.useState(),[o,a]=l.exports.useState(),[s,c]=l.exports.useState(!1),[g,h]=l.exports.useState(!1);return l.exports.useEffect(()=>{const d=parseInt(t);async function f(){r(await _t(d))}f()},[t]),l.exports.useEffect(()=>{const d=parseInt(t);async function f(){const b=await vt(d);b&&a(b)}n&&f()},[s,n,t]),l.exports.useEffect(()=>{h(!!o)},[o]),n?e("div",{className:w.pageContainer,children:i("main",{children:[i("div",{className:w.aboutContainer,children:[e("div",{className:w.aboutCard,children:e(A,{movie:n})}),i("div",{className:w.aboutDetails,children:[e("h1",{children:n.title}),e("h2",{children:n.releaseDate.getFullYear()}),e("p",{children:n.overview})]})]}),g?e(ye,{in:g,children:e("div",{className:w.waitingContainer,children:e(Gt,{credits:o,movie:n,open:s,setOpen:c})})}):e("div",{className:w.waitingProgressContainer,children:e(B,{size:60})})]})}):e("div",{className:w.progressPageContainer,children:e(B,{})})};async function Qt(){await S.set({key:"hasBeen",value:"true"})}async function en(){return!(await S.get({key:"hasBeen"})).value}const tn={id:566525,title:"Shang-Chi and the Legend of the Ten Rings",releaseDate:R("2021-09-01"),overview:"Shang-Chi must confront the past he thought he left behind when he is drawn into the web of the mysterious Ten Rings organization.",posterPath:"/1BIoJGKbXjdFDAqUEiA2VHqkK1Z.jpg"},nn="_root_18408_1",rn="_introContainer_18408_19",an="_welcomeMessage_18408_26",sn="_instruction_18408_46",on="_moviePress_18408_59",cn="_vote_18408_83",ln="_btnContainer_18408_97",dn="_close_18408_107";var m={root:nn,introContainer:rn,welcomeMessage:an,instruction:sn,moviePress:on,vote:cn,btnContainer:ln,close:dn};const hn=({exit:t})=>{function n(){Qt(),t(!1)}return i("div",{className:m.root,children:[i("div",{className:m.introContainer,children:[i("div",{className:m.welcomeMessage,children:[e("p",{children:"Hey, thanks for downloading \u201DStick Around\u201D"}),e("p",{children:"This is the main page, where you can see the movies now playing at theaters."})]}),i("div",{className:m.instruction,children:[i("div",{className:m.moviePress,children:[e(A,{movie:tn,dummy:!0}),e(u,{icon:we})]}),e("p",{children:"After pressing on a title, you will be forwarded to the title\u2019s movie page, where you can see whether or not the movie has a post credits scene."}),i("div",{className:m.vote,children:[e(z,{}),e("span",{children:"VOTED"})]}),e("p",{children:"Please consider voting on the movie page to help increase the app\u2019s accuracy :)"})]})]}),e("div",{className:m.btnContainer,children:e(_,{variant:"contained",disableElevation:!0,onClick:n,children:"Continue"})}),e("div",{className:m.close,children:e(V,{onClick:n,children:e(u,{icon:be})})})]})},un="_root_t7v78_1";var fn={root:un};const gn=()=>i("div",{className:fn.root,children:[e("h1",{children:"hey"}),e("h2",{children:"consider donating"}),e("button",{children:"donate"})]}),vn="_container_5btzx_1",pn="_intro_5btzx_19";var _n={container:vn,intro:pn};const mn=()=>{M(),Ne();const[t,n]=l.exports.useState(!1);return l.exports.useEffect(()=>{async function r(){n(await en())}r()}),i("div",{className:_n.container,children:[i(Se,{children:[e(k,{path:"/movies/:id",children:({match:r})=>{var o;return e(H,{in:r!==null,children:e("main",{children:e(Xt,{id:(o=r==null?void 0:r.params.id)!=null?o:"0"})})})}}),e(k,{path:"/highlight",exact:!0,children:({match:r})=>e(P,{in:r!==null,children:e("main",{children:e(tt,{})})})}),e(k,{path:"/search",exact:!0,children:({match:r})=>e(P,{in:r!==null,children:e("main",{children:e(ut,{})})})}),e(k,{path:"/donate",exact:!0,children:({match:r})=>e(P,{in:r!==null,children:e("main",{children:e(gn,{})})})}),e(k,{path:"/",children:e(U,{to:"/highlight"})}),e(k,{path:"*",children:e(U,{to:"/highlight"})})]}),e("footer",{children:e(qe,{})}),t&&e(hn,{exit:n})]})},Cn="AIzaSyDY6TM6u-X6lJcMNnbo5cvZ29Wp7FRnoHA",yn={apiKey:Cn,authDomain:"stick-around-01.firebaseapp.com",projectId:"stick-around-01",storageBucket:"stick-around-01.appspot.com",messagingSenderId:"363848154346",appId:"1:363848154346:web:9c86b385d000e76f8c6b93",measurementId:"G-ZPY4HGZV7D"},se=ke(yn);xe(se);Te(se);function wn(){return Y.addListener("backButton",({canGoBack:t})=>{t?window.history.back():Y.exitApp()}),e("div",{className:"App",children:e($e,{theme:$,children:e(Me,{children:e(mn,{})})})})}Pe.render(e(Be.StrictMode,{children:e(wn,{})}),document.getElementById("root"));

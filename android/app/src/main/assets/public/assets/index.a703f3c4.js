import{u as B,j as i,a as e,B as _,c as v,F as u,f as H,b as ce,d as le,I as L,e as de,g as ue,r as l,G as W,h as M,C as I,i as V,k as U,l as he,S as C,m as fe,n as ge,o as pe,H as O,M as ve,p as me,q as _e,s as Ce,t as ye,v as we,Z as be,w as ke,x as Y,y as Ne,z as Se,R as S,A as z,D as xe,$ as $e,E as Te,J,T as Be,K as Me,L as Ie,N as Pe}from"./vendor.52a0f4d7.js";const Ee=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}};Ee();const De="_box_17g0y_1",qe="_bottomNav_17g0y_9",Ae="_navBtn_17g0y_16",Re="_selected_17g0y_43";var w={box:De,bottomNav:qe,navBtn:Ae,selected:Re};const je=()=>{const t=B(),n={theaters:"/highlight",search:"/search",donate:"/donate"};function r(o){t.push(o)}return i("div",{className:w.box,children:[e(_,{className:v(w.navBtn,{[w.selected]:t.location.pathname===n.theaters}),onClick:o=>r(n.theaters),children:i("div",{children:[e(u,{icon:H}),e("span",{children:"In Theaters"})]})}),e(_,{className:v(w.navBtn,{[w.selected]:t.location.pathname===n.search}),onClick:o=>r(n.search),children:i("div",{children:[e(u,{icon:ce}),e("span",{children:"Search"})]})}),e(_,{className:v(w.navBtn,{[w.selected]:t.location.pathname===n.donate}),onClick:o=>r(n.donate),children:i("div",{children:[e(u,{icon:le}),e("span",{children:"Support"})]})})]})},Fe="_barContainer_1nxsy_1";var Le={barContainer:Fe};const Ve=({title:t,search:n,back:r})=>{const o=B();function s(){o.push("/search")}function a(){o.push("/highlight")}return i("div",{className:Le.barContainer,children:[r?e(L,{onClick:a,children:e(u,{icon:de})}):e("span",{children:t}),n&&e(L,{onClick:s,children:e(ue,{color:"primary"})})]})},P={default:"https://api.themoviedb.org/3/",MOVIES:"https://api.themoviedb.org/3/movie/",IMAGES:"https://image.tmdb.org/t/p/w200/",HDIMAGES:"https://image.tmdb.org/t/p/w500/",PLAYING:"now_playing",AFTER_STINGER:179430,DURING_STINGER:179431};function Oe(t){switch(t){case"movie":return P.MOVIES;case"image":return P.IMAGES;case"image-hd":return P.HDIMAGES;default:return P.default}}function D(t,n,r){const o="382199f5e49d336dfba83276194599a8",s=Oe(r);let a="";return t&&(a=`&${t.join("&")}`),`${s}${n}?api_key=${o}${a}`}function K(t){return D([],t,"image-hd")}const Ge="_card_qehcj_1",He="_placeholderCard_qehcj_13",We="_skeleton_qehcj_1";var Ue={card:Ge,placeholderCard:He,skeleton:We};const q=({movie:t,dummy:n})=>{const[r,o]=l.exports.useState(!0),s=B();function a(){n||s.push(`/movies/${t.id}`)}return e("div",{className:Ue.card,onClick:a,children:e(W,{in:r,children:e("img",{onClick:a,src:K(t.posterPath),alt:`${t.title} poster image`})})})};function A(t){return new Date(Date.parse(t))}async function Ye(t){const n=r=>D(["language=en-US",`page=${r}`],P.PLAYING,"movie");try{return(await fetch(n(t)).then(s=>s.json()).catch(s=>{throw Error("Error fetching movies")})).results.map(s=>{var a,c;return{id:s.id,title:s.title,releaseDate:A(s.release_date),overview:(a=s.overview)!=null?a:"",posterPath:(c=s.poster_path)!=null?c:""}})}catch(r){console.error(r)}}function ze(t){const[n,r]=l.exports.useState(!0),[o,s]=l.exports.useState(!1),[a,c]=l.exports.useState([]),[p,h]=l.exports.useState(!1);return l.exports.useEffect(()=>{r(!0),Ye(t).then(d=>{c(f=>f.concat(d)),h(d.length>0),r(!1)}).catch(d=>s(!0))},[t]),{loading:n,movies:a,hasMore:p,error:o}}const Je="_cardsContainer_1s7ef_1",Ke="_nowPlayingContainer_1s7ef_9",Ze="_highlightContainer_1s7ef_19",Xe="_progressContainer_1s7ef_26",Qe="_loadingCard_1s7ef_35",et="_loadingBg_1s7ef_1",tt="_errorCard_1s7ef_53";var x={cardsContainer:Je,nowPlayingContainer:Ke,highlightContainer:Ze,progressContainer:Xe,loadingCard:Qe,loadingBg:et,errorCard:tt};const nt=()=>{const[t,n]=l.exports.useState(1),{movies:r,hasMore:o,loading:s,error:a}=ze(t),c=l.exports.useRef(null),p=l.exports.useCallback(h=>{s||(c.current&&c.current.disconnect(),c.current=new IntersectionObserver(d=>{d[0].isIntersecting&&o&&n(f=>f+1)}),h&&c.current.observe(h))},[s,o]);return e("div",{className:x.nowPlayingContainer,children:r.length>0?i("div",{className:x.highlightContainer,children:[e(Ve,{title:"In Theaters",search:!0}),i("div",{className:x.cardsContainer,children:[r.map((h,d)=>r.length===d+1?e("div",{ref:p,children:e(q,{movie:h})},d):e(q,{movie:h},d)),!a&&e(M,{in:s,children:e("div",{className:x.loadingCard,children:e(I,{})})}),e(M,{in:a,children:e("div",{className:x.errorCard,children:e(u,{icon:V})})})]})]}):e("div",{className:x.progressContainer,children:e(I,{})})})};async function rt(t){const n=D(["language=en",`query=${t}`],"search/movie"),{results:r}=await fetch(n).then(s=>s.json());return r.map(s=>{var a,c;return{id:s.id,title:s.title,releaseDate:A(s.release_date),overview:(a=s.overview)!=null?a:"",posterPath:(c=s.backdrop_path)!=null?c:""}})}const at="_barContainer_1buq4_1",st="_overlay_1buq4_29";var Z={barContainer:at,overlay:st};const ot=({movie:t})=>{const n=B();function r(){n.push(`/movies/${t.id}`)}return i("div",{className:Z.barContainer,style:{backgroundImage:`url(${K(t.posterPath)})`},onClick:r,children:[e("span",{children:t.title}),e("span",{children:t.releaseDate.getFullYear()}),e("div",{className:Z.overlay})]})},it="_searchContainer_1o4lq_1",ct="_searchField_1o4lq_13",lt="_resultsContainer_1o4lq_45",dt="_movieBarContainer_1o4lq_56",ut="_noResultsContainer_1o4lq_60",ht="_searchStartScreen_1o4lq_76";var $={searchContainer:it,searchField:ct,resultsContainer:lt,movieBarContainer:dt,noResultsContainer:ut,searchStartScreen:ht};const ft=()=>{const[t,n]=l.exports.useState(""),[r,o]=l.exports.useState([]);l.exports.useEffect(()=>{async function a(){o(await rt(t))}t!==""&&a()},[t]);function s(){return t===""?i("div",{className:$.searchStartScreen,children:[e(u,{icon:H}),e(u,{icon:U})]}):i("div",{className:$.noResultsContainer,children:[e(u,{icon:he}),e("span",{children:"No results found"})]})}return i("div",{className:$.searchContainer,children:[e("div",{className:$.searchField,children:e("input",{type:"text",placeholder:"Search...",autoFocus:!0,value:t,onChange:a=>n(a.currentTarget.value)})}),r.length>0?e("div",{className:$.resultsContainer,children:r.map((a,c)=>e("div",{className:$.movieBarContainer,children:e(ot,{movie:a})},c))}):s()]})},X={during:0,after:0,trust:4,total:0},R={Certified:"Certified Results",Users:"These results rely on user votes and therefore may not be accurate",TMDB:"These results rely on the TMDB Database and have not yet been confirmed by our users","404":"No information"},j=()=>"https://stick-around-backend-01-ie7sxtuaoa-uc.a.run.app/api".toString();async function Q(t,n){const r=await C.get({key:`${t}`});if(r.value){const o=r.value&&JSON.parse(r.value);o[n]=!0,await C.set({key:`${t}`,value:JSON.stringify(o,null,2)})}else{const o=n==="after"?{after:!0,during:!1}:{after:!1,during:!0};await C.set({key:`${t}`,value:JSON.stringify(o,null,2)})}}async function gt(t){const{value:n}=await C.get({key:`${t}`});return n?JSON.parse(n):null}async function pt(){return!!(await fetch(`${j()}/authenticate`,{credentials:"include",method:"POST"}).then(n=>n.json())).success}async function vt(t){try{const n=await fetch(`${j()}/movies/${t}`).then(r=>r.json()).catch(r=>r);return n.success?n.data:X}catch(n){return X}}async function ee(t,n,r){const o=`${j()}/vote`;return!!(await fetch(`${o}/${n}/${t}/?vote=${r}`,{credentials:"include",method:"POST"}).then(a=>a.json())).success}async function mt(t,n,r){const o=await ee(t,n,r);return o?(await Q(t,n),console.log("trying to register vote"),o):pt()&&await ee(t,n,r)?(await Q(t,n),!0):!1}async function _t(t){var s,a;const n=D([],`${t}`,"movie"),r=await fetch(n).then(c=>c.json());return{id:r.id,title:r.title,releaseDate:A(r.release_date),overview:(s=r.overview)!=null?s:"",posterPath:(a=r.poster_path)!=null?a:""}}function Ct(t){if(t)return t.after>0||t.during>0?1:t.after<0&&t.during<0?-1:0}function yt(t){switch(t){case 1:return"YES";case-1:return"NO";case 0:return"MAYBE";default:return"MAYBE"}}const wt="_waitingContainer_1kkqr_1",bt="_worth_1kkqr_34",kt="_notWorth_1kkqr_38",Nt="_maybeWorth_1kkqr_42",St="_creditsRow_1kkqr_46",xt="_creditsContainer_1kkqr_53",$t="_admin_1kkqr_76",Tt="_votes_1kkqr_80",Bt="_moreInfo_1kkqr_89",Mt="_waitingProgressContainer_1kkqr_102";var g={waitingContainer:wt,worth:bt,notWorth:kt,maybeWorth:Nt,creditsRow:St,creditsContainer:xt,admin:$t,votes:Tt,moreInfo:Bt,waitingProgressContainer:Mt};const T=fe({palette:{primary:{main:"#6E85B2",dark:"#261C2C",light:"#6E85B2"},secondary:{main:"#5C527F"},success:{main:"#4AA96C"},error:{main:"#FF5C58"},background:{default:"#261C2C"}}}),It="_markContainer_1fpnq_1",Pt="_iconContainer_1fpnq_5",Et="_voteContainer_1fpnq_12",Dt="_long_1fpnq_31",qt="_maybe_1fpnq_37";var m={markContainer:It,iconContainer:Pt,voteContainer:Et,long:Dt,maybe:qt};const te=({count:t,trust:n})=>t>0?i("div",{className:m.markContainer,children:[e("div",{className:m.iconContainer,children:e(u,{icon:ge,color:T.palette.success.main})}),e(ne,{count:t,trust:n})]}):t===0||n===4?e("div",{className:m.markContainer,children:e("div",{className:v(m.iconContainer,m.maybe),children:e(u,{icon:U,color:T.palette.primary.light})})}):i("div",{className:m.markContainer,children:[e("div",{className:m.iconContainer,children:e(u,{icon:pe,color:T.palette.error.main})}),e(ne,{count:t,trust:n})]}),ne=({count:t,trust:n})=>n===2?e("div",{className:v(m.voteContainer,{[m.long]:t.toString().length>1}),children:e("span",{children:t})}):null,At="_voteContainer_hijyz_1",Rt="_votedContainer_hijyz_28";var re={voteContainer:At,votedContainer:Rt};const ae=({onClick:t,creditType:n,hasVoted:r})=>r?i(_,{className:re.votedContainer,disabled:!0,children:[e(O,{}),e("span",{children:"VOTED"})]}):i(_,{className:v(re.voteContainer,{voted:r}),onClick:o=>t(n),children:[e(O,{}),e("span",{children:"VOTE"})]}),jt="_modalBox_n78oi_1",Ft="_votingContainer_n78oi_35";var se={modalBox:jt,votingContainer:Ft};const Lt=({open:t,onClose:n,creditType:r,setOpen:o,movie:s,votingStatus:a})=>{const[c,p]=l.exports.useState(!1),h=()=>r==="after"?"Is there an after credits scene?":"Is there a scene during the credits?";async function d(f){a[r]||(p(!0),await mt(s.id,r,f)||console.error("Voting error"),o(!1))}return e(ve,{open:t,onClose:n,children:i("div",{className:se.modalBox,children:[e("span",{children:h()}),i("div",{className:se.votingContainer,children:[e(_,{variant:"contained",color:"success",onClick:f=>d(!0),disableElevation:!0,children:e(u,{icon:me,color:T.palette.primary.dark})}),e(_,{variant:"contained",color:"error",onClick:f=>d(!1),disableElevation:!0,children:e(u,{icon:_e,color:T.palette.primary.dark})})]})]})})},Vt="_root_1mufk_1",Ot="_iconContainer_1mufk_12",Gt="_textContainer_1mufk_27";var E={root:Vt,iconContainer:Ot,textContainer:Gt};const Ht=({trust:t})=>{switch(t){case 1:return e(Wt,{icon:we});case 2:return e(F,{icon:ye,message:R.Users});case 3:return e(F,{icon:Ce,message:R.TMDB});case 4:return e(F,{icon:V,message:R[404]});default:return e(F,{icon:V,message:R[404]})}},F=({icon:t,message:n})=>i("div",{className:E.root,children:[e("div",{className:E.iconContainer,children:e(u,{icon:t})}),e("p",{children:n})]}),Wt=({icon:t})=>i("div",{className:E.root,children:[e("div",{className:E.iconContainer,children:e(u,{icon:t})}),i("div",{className:E.textContainer,children:[e("h5",{children:"Certified"}),e("p",{children:"These results have been confirmed by our moderators"})]})]}),Ut=({movie:t,credits:n,open:r,setOpen:o})=>{const[s,a]=l.exports.useState("during"),[c,p]=l.exports.useState(0),[h,d]=l.exports.useState({after:!0,during:!0}),f=()=>o(!1);function k(N){a(N),o(!0)}return l.exports.useEffect(()=>{async function N(){const G=await gt(t.id);d(G||{after:!1,during:!1})}N()},[r,t]),l.exports.useEffect(()=>{var N;p((N=Ct(n))!=null?N:0)},[n,h]),n?i("div",{className:v(g.waitingContainer,{[g.worth]:c===1},{[g.notWorth]:c===-1},{[g.maybeWorth]:c===0}),children:[e("h1",{children:"Should you wait?"}),e("h2",{children:yt(c)}),e("div",{className:g.creditsRow,children:i("div",{className:v(g.creditsContainer,{[g.admin]:n.trust===1}),children:[i("span",{children:[e("em",{children:"During"})," the credits?"]}),e(te,{count:n.during,trust:n.trust}),n.trust!==1&&e(ae,{onClick:k,creditType:"during",hasVoted:h.during})]})}),e("div",{className:g.creditsRow,children:i("div",{className:v(g.creditsContainer,{[g.admin]:n.trust===1}),children:[i("span",{children:[e("em",{children:"After"})," the credits?"]}),e(te,{count:n.after,trust:n.trust}),n.trust!==1&&e(ae,{onClick:k,creditType:"after",hasVoted:h.after})]})}),e(Ht,{trust:n.trust}),e(Lt,{open:r,onClose:f,creditType:s,setOpen:o,movie:t,votingStatus:h})]}):e("div",{className:g.waitingProgressContainer,children:e(I,{size:60})})},Yt="_pageContainer_1hso4_1",zt="_aboutContainer_1hso4_27",Jt="_waitingContainer_1hso4_34",Kt="_aboutCard_1hso4_38",Zt="_aboutDetails_1hso4_44",Xt="_progressPageContainer_1hso4_70",Qt="_waitingProgressContainer_1hso4_78";var b={pageContainer:Yt,aboutContainer:zt,waitingContainer:Jt,aboutCard:Kt,aboutDetails:Zt,progressPageContainer:Xt,waitingProgressContainer:Qt};const en=({id:t})=>{const[n,r]=l.exports.useState(),[o,s]=l.exports.useState(),[a,c]=l.exports.useState(!1),[p,h]=l.exports.useState(!1);return l.exports.useEffect(()=>{const d=parseInt(t);async function f(){r(await _t(d))}f()},[t]),l.exports.useEffect(()=>{const d=parseInt(t);async function f(){const k=await vt(d);k&&s(k)}n&&f()},[a,n,t]),l.exports.useEffect(()=>{h(!!o)},[o]),n?e("div",{className:b.pageContainer,children:i("main",{children:[i("div",{className:b.aboutContainer,children:[e("div",{className:b.aboutCard,children:e(q,{movie:n})}),i("div",{className:b.aboutDetails,children:[e("h1",{children:n.title}),e("h2",{children:n.releaseDate.getFullYear()}),e("p",{children:n.overview})]})]}),p?e(be,{in:p,children:e("div",{className:b.waitingContainer,children:e(Ut,{credits:o,movie:n,open:a,setOpen:c})})}):e("div",{className:b.waitingProgressContainer,children:e(I,{size:60})})]})}):e("div",{className:b.progressPageContainer,children:e(I,{})})};async function tn(){await C.set({key:"hasBeen",value:"true"})}async function nn(){return!(await C.get({key:"hasBeen"})).value}const rn={id:566525,title:"Shang-Chi and the Legend of the Ten Rings",releaseDate:A("2021-09-01"),overview:"Shang-Chi must confront the past he thought he left behind when he is drawn into the web of the mysterious Ten Rings organization.",posterPath:"/1BIoJGKbXjdFDAqUEiA2VHqkK1Z.jpg"},an="_root_18408_1",sn="_introContainer_18408_19",on="_welcomeMessage_18408_26",cn="_instruction_18408_46",ln="_moviePress_18408_59",dn="_vote_18408_83",un="_btnContainer_18408_97",hn="_close_18408_107";var y={root:an,introContainer:sn,welcomeMessage:on,instruction:cn,moviePress:ln,vote:dn,btnContainer:un,close:hn};const fn=({exit:t})=>{function n(){tn(),t(!1)}return i("div",{className:y.root,children:[i("div",{className:y.introContainer,children:[i("div",{className:y.welcomeMessage,children:[e("p",{children:"Hey, thanks for downloading \u201DStick Around\u201D"}),e("p",{children:"This is the main page, where you can see the movies now playing at theaters."})]}),i("div",{className:y.instruction,children:[i("div",{className:y.moviePress,children:[e(q,{movie:rn,dummy:!0}),e(u,{icon:ke})]}),e("p",{children:"After pressing on a title, you will be forwarded to the title\u2019s movie page, where you can see whether or not the movie has a post credits scene."}),i("div",{className:y.vote,children:[e(O,{}),e("span",{children:"VOTED"})]}),e("p",{children:"Please consider voting on the movie page to help increase the app\u2019s accuracy :)"})]})]}),e("div",{className:y.btnContainer,children:e(_,{variant:"contained",disableElevation:!0,onClick:n,children:"Continue"})}),e("div",{className:y.close,children:e(L,{onClick:n,children:e(u,{icon:Y})})})]})},gn="_root_t7v78_1";var pn={root:gn};const vn=()=>i("div",{className:pn.root,children:[e("h1",{children:"hey"}),e("h2",{children:"consider donating"}),e("button",{children:"donate"})]});async function mn(){const{value:t}=await C.get({key:"broadcast"});return t?Number.parseInt(t):0}async function oe(t){t&&await C.set({key:"broadcast",value:t.toString()})}async function _n(){const t=await mn(),n=await fetch(`${j()}/broadcast/${t}`);if(n.status===404)return null;if(n.ok){const o=(await n.json()).data;return oe(o.bid),o}else return null}const Cn="_root_sjnwi_1";var yn={root:Cn};const wn=({broadcast:t,exit:n})=>(l.exports.useEffect(()=>{oe(t.bid)},[t.bid]),i("div",{className:yn.root,children:[e("button",{onClick:n,children:e(u,{icon:Y})}),e("h1",{children:t.title}),e("p",{children:t.description})]})),bn="_container_1fgka_1",kn="_intro_1fgka_20";var Nn={container:bn,intro:kn};const Sn=()=>{B(),Ne();const[t,n]=l.exports.useState(!1),[r,o]=l.exports.useState();l.exports.useEffect(()=>{async function a(){n(await nn())}a()},[]),l.exports.useEffect(()=>{async function a(){o(await _n())}a()},[]);const s=l.exports.useCallback(()=>{o(null)},[]);return i("div",{className:Nn.container,children:[i(Se,{children:[e(S,{path:"/movies/:id",children:({match:a})=>{var c;return e(W,{in:a!==null,children:e("main",{children:e(en,{id:(c=a==null?void 0:a.params.id)!=null?c:"0"})})})}}),e(S,{path:"/highlight",exact:!0,children:({match:a})=>e(M,{in:a!==null,children:e("main",{children:e(nt,{})})})}),e(S,{path:"/search",exact:!0,children:({match:a})=>e(M,{in:a!==null,children:e("main",{children:e(ft,{})})})}),e(S,{path:"/donate",exact:!0,children:({match:a})=>e(M,{in:a!==null,children:e("main",{children:e(vn,{})})})}),e(S,{path:"/",children:e(z,{to:"/highlight"})}),e(S,{path:"*",children:e(z,{to:"/highlight"})})]}),e("footer",{children:e(je,{})}),t&&e(fn,{exit:n}),!t&&r&&e(wn,{broadcast:r,exit:s})]})},xn="AIzaSyDY6TM6u-X6lJcMNnbo5cvZ29Wp7FRnoHA",$n={apiKey:xn,authDomain:"stick-around-01.firebaseapp.com",projectId:"stick-around-01",storageBucket:"stick-around-01.appspot.com",messagingSenderId:"363848154346",appId:"1:363848154346:web:9c86b385d000e76f8c6b93",measurementId:"G-ZPY4HGZV7D"},ie=xe($n);$e(ie);Te(ie);function Tn(){return J.addListener("backButton",({canGoBack:t})=>{t?window.history.back():J.exitApp()}),e("div",{className:"App",children:e(Be,{theme:T,children:e(Me,{children:e(Sn,{})})})})}Ie.render(e(Pe.StrictMode,{children:e(Tn,{})}),document.getElementById("root"));
